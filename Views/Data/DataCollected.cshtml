@model List<FYP.Models.Ticket>

<!DOCTYPE html>
<html>
<head>
    <script>
    function showMessage() {
        var confirmation = confirm("Leave page?");

        if (confirmation) {
            window.location.href = "/Home/Index";
        } else {
            // User chose to cancel will just get back to the form
        }
    }
</script>
    <style>
        body{
            background-color: white;
        } 
    </style>
    <title>Data Collected</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <button onclick="showMessage()">Back</button>
    <h2>Status</h2>
    <canvas id="statusChart"></canvas>

    <h2>Priority</h2>
    <canvas id="priorityChart"></canvas>

    <h2>Category</h2>
    <canvas id="categoryChart"></canvas>

    <script>
        var statusData = {
            labels: @Html.Raw(Json.Serialize(Model.Select(ticket => ticket.Status))),
            datasets: [{
                label: 'Status',
                data: @Html.Raw(Json.Serialize(Model.Select(ticket => ticket.Status))),
                backgroundColor: [
                    'rgba(255, 99, 132, 0.6)',
                    'rgba(54, 162, 235, 0.6)',
                    'rgba(255, 206, 86, 0.6)',
                    'rgba(75, 192, 192, 0.6)',
                    'rgba(153, 102, 255, 0.6)',
                    'rgba(255, 159, 64, 0.6)'
                ]
            }]
        };

        var priorityData = {
            labels: @Html.Raw(Json.Serialize(Model.Select(ticket => ticket.Priority))),
            datasets: [{
                label: 'Priority',
                data: @Html.Raw(Json.Serialize(Model.Select(ticket => ticket.Priority))),
                backgroundColor: [
                    'rgba(255, 99, 132, 0.6)',
                    'rgba(54, 162, 235, 0.6)',
                    'rgba(255, 206, 86, 0.6)',
                    'rgba(75, 192, 192, 0.6)',
                    'rgba(153, 102, 255, 0.6)',
                    'rgba(255, 159, 64, 0.6)'
                ]
            }]
        };

        var categoryData = {
            labels: @Html.Raw(Json.Serialize(Model.Select(ticket => ticket.Category))),
            datasets: [{
                label: 'Category',
                data: @Html.Raw(Json.Serialize(Model.Select(ticket => ticket.Category))),
                backgroundColor: [
                    'rgba(255, 99, 132, 0.6)',
                    'rgba(54, 162, 235, 0.6)',
                    'rgba(255, 206, 86, 0.6)',
                    'rgba(75, 192, 192, 0.6)',
                    'rgba(153, 102, 255, 0.6)',
                    'rgba(255, 159, 64, 0.6)'
                ]
            }]
        };

        var statusCtx = document.getElementById('statusChart').getContext('2d');
        var statusChart = new Chart(statusCtx, {
            type: 'bar',
            data: statusData,
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        var priorityCtx = document.getElementById('priorityChart').getContext('2d');
        var priorityChart = new Chart(priorityCtx, {
            type: 'bar',
            data: priorityData,
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        var categoryCtx = document.getElementById('categoryChart').getContext('2d');
        var categoryChart = new Chart(categoryCtx, {
            type: 'pie',
            data: categoryData,
            options: {
                responsive: true,
            }
        });
    </script>
</body>
</html>
